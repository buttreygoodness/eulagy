#companies
  %ul
    - (@companies).each do |company|
      %li{:class => "company_button"}
        %a{:href => "/company/#{company.id}"}= "#{company.name}"
        
#company_form.form_div
  %form{:id => "company_admin", :action => "/api/company", :method => "post"}
    %fieldset
      %legend Company Admin
      %div
        %label{:for => "name"} Name
        %input{:name => "name", :type => "textfield", :placeholder => "Company Name"}
      %input{:type => "submit", :value => "Save"}

  #application_form.form_div
    %form{:id => "application_admin"}
      %fieldset
        %legend Application Admin
        %div
          %label{:for => "name"} Name
          %input{:name => "name", :type => "textfield", :placeholder => "Application Name"}
        %div
          %label{:for => "version"} Version
          %input{:name => "version", :type => "textfield", :placeholder => "Application Version"}
        %input{:type => "submit", :value => "Save"}
  
    #license_form.form_div
      %form{:id => "license_admin"}
        %fieldset
          %legend License Admin
          %div
            %label{:for => "text_full"} Contents
            %textarea{:name => "text_full", :placeholder => "Paste EULA here."}
          %input{:type => "submit", :value => "Save"}
    
    %p.toolbar
      %a{:href => "#", :class => "button", :id => "add_license"} Add a license
            
  %p.toolbar
    %a{:href => "#", :class => "button", :id => "add_application"} Add an application

#company_pane
        
#toolbar.toolbar
  %p
    %a{:href => "#", :class => "button", :id => "add_company"} Add a company

:javascript
  var eu;

  head.ready("eulagy_mod", function(){
    eu = new Eulagy();
    eu.lists.company.refresh(#{@companies.to_json});
  });
  
  head.ready("backbone", function(){
    head.js(
      {company:     '/javascripts/app/company.js'},
      {application: '/javascripts/app/application.js'},
      {eula:        '/javascripts/app/eula.js'},
      {eulagy_mod:  '/javascripts/app/eulagy_module.js'}
    )
  });

  head.js(
    {json2:       '/javascripts/lib/backbone/json2.js'},
    {underscore:  '/javascripts/lib/backbone/underscore-min.js'},
    {backbone:    '/javascripts/lib/backbone/backbone-min.js'},
    {jquery:      '/javascripts/lib/jquery.min.js'}
  );

%script{:type => 'text/template', :id => 'company-template'}
  %div{:class => 'company'}
    %div{:class => 'edit'}
      %input{:class => 'company-input', :type => 'text', :value => ''}
      
%script{:type => 'text/template', :id => 'application-template'}
  %div{:class => 'application'}
    %div{:class => 'edit'}
      %input{:class => 'application-input', :type => 'text', :value => ''}
      
%script{:type => 'text/template', :id => 'eula-template'}
  %div{:class => 'eula'}
    %div{:class => 'edit'}
      %input{:class => 'eula-input', :type => 'text', :value => ''}